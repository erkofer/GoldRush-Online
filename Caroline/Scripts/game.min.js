var Utils;
(function(a){a.addEvent=function(a,p,m){null!=a&&"undefined"!=typeof a&&(a.addEventListener?a.addEventListener(p,m,!1):a.attachEvent?a.attachEvent("on"+p,m):a["on"+p]=m)};a.cssSwap=function(a,p,m){a.classList.contains(p)&&a.classList.remove(p);a.classList.add(m)};a.cssifyName=function(a){return a.split(" ").join("_")};a.ifNotDefault=function(a,p){-100!=a&&p()};a.createButton=function(a,p){var m,q;m=document.createElement("div");q=document.createElement("div");q.textContent=a;p&&(q.id=p);m.classList.add("button");
m.appendChild(q);return m};a.isNumber=function(a){return!isNaN(parseFloat(a))};a.formatNumber=function(a,p){"undefined"===typeof p&&(p=!1);return a?p?a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):999999999999999<a?(a/1E15).toFixed(3)+"Qa":999999999999<a?(a/1E12).toFixed(3)+"T":999999999<a?(a/1E9).toFixed(3)+"B":999999<a?(a/1E6).toFixed(3)+"M":a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"};a.getRandomInt=function(a,p){return Math.floor(Math.random()*(p-a+1))+a};a.formatTime=function(a){var p=
Math.floor(a/3600),m=Math.floor(a%3600/60);a=Math.floor(a%60);return(10>p?1>p?"":"0"+p+":":p+":")+(10>m?"0"+m+":":m+":")+(10>a?"0"+a:a+"")};a.convertServerTimeToLocal=function(a){var p=new Date,m=p.toISOString().split("-")[0],q=p.toISOString().split("-")[1],r=p.toISOString().split("-")[2].split("T")[0],p=+a.split(":")[0],k=+a.split(":")[1].split(" ")[0];a=a.split(":")[1].split(" ")[1];q=q+"/"+r+"/"+m+" "+((10>p?"0":"")+p)+":"+((10>k?"0":"")+k)+":00 "+a+" UTC";m=new Date(q);console.log(q);console.log(m);
p=m.getHours();k=m.getMinutes();return(10>p?"0":"")+p+":"+(10>k?"0":"")+k}})(Utils||(Utils={}));var tooltip;
(function(a){function s(a,g){var c=b.getBoundingClientRect(),e=c.right-c.left,c=c.bottom-c.top;b.style.left=e+(a+15)>window.innerWidth?a-e-15+"px":a+15+"px";b.style.top=0<g-c?g-c+"px":g+5+"px"}function p(){b&&b.parentElement.removeChild(b);d=b=null}function m(b,a,c){var g=new l;q(b);c&&(g.header=c);g.content=a;k.push(g);b.dataset?b.dataset.tooltip=r:b.setAttribute("data-tooltip",r.toString());r++}function q(a){a.onmouseenter=function(a){var n=+a.target.getAttribute("data-tooltip");f!==a.target&&(c=
setInterval(function(){h+=.01;if(.25<=h){var a=g,f=e,l=k[n];d!==n&&p();d=n;b=l.html;document.body.appendChild(b);s(a,f);h=0;clearInterval(c);c=null}},10));f=a.target};a.onmousemove=function(b){b=b.pageX||b.pageY?{x:b.pageX,y:b.pageY}:b.clientX||b.clientY?{x:b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:b.clientY+document.body.scrollTop+document.documentElement.scrollTop}:void 0;c||s(b.x,b.y);g=b.x;e=b.y};a.onmouseleave=function(b){f=null;clearInterval(c);h=0;p()}}var r=
0,k=[],d,b,c,h=0,g,e,f,l=function(){function b(){this.html=document.createElement("div");this.html.classList.add("tooltip-wrapper")}Object.defineProperty(b.prototype,"header",{get:function(){return this.html.getElementsByClassName("tooltip-header")[0]},set:function(b){b.classList.add("tooltip-header");this.html.appendChild(b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"content",{get:function(){return this.html.getElementsByClassName("tooltip-content")[0]},set:function(b){b.classList.add("tooltip-content");
this.html.appendChild(b)},enumerable:!0,configurable:!0});return b}();a.complexModify=function(b,a,c){b=k[b];c&&(b.header.parentElement.removeChild(b.header),b.header=c);b.content.parentElement.removeChild(b.content);b.content=a};a.modify=function(b,a,c){b=k[b];c&&(b.header.textContent=c);b.content.textContent=a};a.retrieveContent=function(b){return k[b].content};a.complexCreate=m;a.create=function(b,a,c){var g=document.createElement("div");g.textContent=a;c?(a=document.createElement("div"),a.textContent=
c,m(b,g,a)):m(b,g)}})(tooltip||(tooltip={}));var Chat;
(function(a){function s(){if(!m){m=document.createElement("DIV");m.classList.add("chat-window");m.classList.add("social");m.id="chatWindow";m.style.backgroundColor="#ebebeb";m.style.border="1px solid #adadad";var a=document.createElement("DIV");a.classList.add("chat-header");a.style.backgroundColor="rgb(160, 160, 160)";m.appendChild(a);var d=document.createElement("DIV");d.textContent="_";d.style.position="absolute";d.style.top="0";d.style.right="0";d.addEventListener("click",function(){m.classList.contains("closed")?
(m.classList.remove("closed"),d.textContent="_"):(m.classList.add("closed"),d.textContent="+")});a.appendChild(d);var b=document.createElement("DIV");b.classList.add("chat-room-tab");b.textContent="General";b.addEventListener("click",function(){document.getElementById("debugpane").style.display="none";document.getElementById("chatpane").style.display="block"});a.appendChild(b);b=document.createElement("DIV");b.classList.add("chat-room-tab");b.textContent=">Dev";b.addEventListener("click",function(){document.getElementById("debugpane").style.display=
"block";document.getElementById("chatpane").style.display="none"});b.style.display="none";a.appendChild(b);r=document.createElement("DIV");r.id="debugpane";r.classList.add("chat-room");r.style.display="none";m.appendChild(r);q=document.createElement("DIV");q.id="chatpane";q.classList.add("chat-room");m.appendChild(q);a=document.createElement("DIV");a.id="debuglog";a.classList.add("chat-room-content");r.appendChild(a);a=document.createElement("DIV");a.id="chatlog";a.classList.add("chat-room-content");
q.appendChild(a);a=document.createElement("DIV");b=document.createElement("DIV");b.classList.add("chat-textbox-container");var c=document.createElement("INPUT");c.setAttribute("TYPE","TEXT");c.classList.add("chat-textbox");c.style.borderTop="1px solid #adadad";c.setAttribute("maxlength","220");c.addEventListener("keydown",function(b){13==b.keyCode&&p();68==b.keyCode&&b.altKey&&(document.getElementById("debugtab").style.display="inline-block")});c.id="chattext";b.appendChild(c);a.appendChild(b);b=
document.createElement("DIV");b.classList.add("chat-submit-container");c=document.createElement("INPUT");c.setAttribute("TYPE","BUTTON");c.setAttribute("VALUE","SEND");c.classList.add("chat-submit");c.style.borderTop="1px solid #adadad";c.style.borderLeft="1px solid #adadad";c.addEventListener("click",function(){p()});b.appendChild(c);a.appendChild(b);m.appendChild(a);document.body.appendChild(m)}}function p(){Connection.sendGlobalMessage(document.getElementById("chattext").value);document.getElementById("chattext").value=
""}var m,q,r;a.initialize=s;s();a.log=function(a){var d=document.getElementById("debuglog"),b=document.createElement("DIV");b.textContent=a;d.appendChild(b)};a.receiveGlobalMessage=function(a,d,b,c){var h=document.getElementById("chatlog"),g=5>Math.abs(h.scrollTop-(h.scrollHeight-h.offsetHeight)),e=document.createElement("DIV");e.classList.add("chat-msg");c&&""!=c&&e.classList.add("chat-"+c);c=document.createElement("SPAN");c.textContent="["+Utils.convertServerTimeToLocal(b)+"] ";b=document.createElement("SPAN");
b.textContent=a;b.classList.add("chat-sender");a=document.createElement("SPAN");a.textContent=d;a.classList.add("chat-text");d=document.createElement("SPAN");d.textContent=": ";e.appendChild(c);e.appendChild(b);e.appendChild(d);e.appendChild(a);h.appendChild(e);g&&(h.scrollTop=h.scrollHeight)}})(Chat||(Chat={}));var Tabs;
(function(a){function s(){if(k){var b=k.scrollHeight,d=a.bottomPadding+m.clientHeight;b>window.innerHeight-d&&(b=window.innerHeight-d);q.style.minHeight=b+"px";q.style.maxHeight=b+"px";q.style.overflowY=b>=window.innerHeight-d?"scroll":"hidden"}}var p=0,m=document.getElementById("tabContainer"),q=document.getElementById("paneContainer");a.bottomPadding=170;var r=[],k,d=new (function(){function c(b){this.container=b;this.tabs=[];this.lowestId=0;this.id=p++;r.push(this)}c.prototype.newTab=function(c){var g=
new b;g.pane=c;c=document.createElement("DIV");c.classList.add("tab-button");this.container.appendChild(c);g.button=c;0==this.lowestId?g.activate():g.deactivate();var e=this.lowestId++,d=this.id;c.addEventListener("click",function(){a.activateTab(d,e)});this.tabs.push(g);this.container.appendChild(c);return this.lowestId-1};c.prototype.activate=function(b){for(var a=0;a<this.tabs.length;a++)this.tabs[a].deactivate();this.tabs[b].activate()};c.prototype.css=function(b,a){this.tabs[b].button.classList.add(a)};
c.prototype.connectionLink=function(b,a){this.tabs[b].connectionTab=a};return c}())(document.getElementById("tabContainer"));a.registerGameTab=function(b,a,g){b=d.newTab(b);d.connectionLink(b,a);g&&d.css(b,g)};a.updateGameTabs=s;Utils.addEvent(window,"resize",a.updateGameTabs);setInterval(s,20);a.activateTab=function(b,a){r[b].activate(a);s()};var b=function(){function b(){}b.prototype.deactivate=function(){Utils.cssSwap(this.button,"active","inactive");this.pane.style.display="none";this.pane.style.overflow=
"hidden"};b.prototype.activate=function(){Utils.cssSwap(this.button,"inactive","active");this.pane.style.display="block";this.pane.style.overflow="visible";k=this.pane;Connection.changeSelectedTab(this.connectionTab)};return b}()})(Tabs||(Tabs={}));var Objects;
(function(a){var s=[],p=function(){return function(){this.quantity=0}}();a.register=function(a,q){if(!s[a]){var r=new p;r.name=q;s[a]=r}};a.lookupName=function(a){return s[a].name};a.setQuantity=function(a,p){s[a].quantity=p};a.getQuantity=function(a){return(a=s[a])?a.quantity:0};a.setMaxQuantity=function(a,p){s[a].maxQuantity=p};a.getMaxQuantity=function(a){return s[a].maxQuantity};a.setLifeTimeTotal=function(a,p){s[a].lifeTimeTotal=p};a.getLifeTimeTotal=function(a){return s[a].lifeTimeTotal};a.setTooltip=
function(a,p){s[a].tooltip=p};a.getTooltip=function(a){return s[a].tooltip}})(Objects||(Objects={}));var Inventory;
(function(a){function s(b){Connection.sellItem(h.id,b?b:1)}function p(){var b=document.getElementById("selecteditemquantity"),c=+b.value;Utils.isNumber(c)&&c>a.getSelectedItemQuantity()&&(b.value=a.getSelectedItemQuantity().toString())}function m(){k=document.createElement("DIV");document.getElementById("paneContainer").appendChild(k);b=document.createElement("DIV");b.classList.add("selected-item");b.style.display="none";var n=document.createElement("SPAN");n.textContent="x";n.style.top="0px";n.style.right=
"3px";n.style.position="absolute";n.addEventListener("click",function(){a.selectItem()});b.appendChild(n);c=document.createElement("DIV");c.classList.add("selected-item-image");n=document.createElement("INPUT");n.id="selecteditemquantity";n.type="text";n.style.height="18px";n.classList.add("selected-item-quantity");n.addEventListener("input",function(){p()});f=Utils.createButton("Drink","");f.classList.add("selected-item-quantity");f.addEventListener("click",function(){Connection.drink(h.id);p()});
var l=Utils.createButton("Sell","");l.classList.add("selected-item-quantity");l.addEventListener("click",function(){var b=+document.getElementById("selecteditemquantity").value;Utils.isNumber(b)&&a.sellSelectedItem(b);p()});var m=Utils.createButton("Sell all","");m.classList.add("selected-item-quantity");m.addEventListener("click",function(){a.sellAllSelectedItem();p()});b.appendChild(c);b.appendChild(m);b.appendChild(l);b.appendChild(f);b.appendChild(n);k.appendChild(b);n=document.createElement("DIV");
n.style.textAlign="center";l=document.createElement("DIV");l.style.display="inline-block";m=Utils.createButton("Sell (...)","");m.addEventListener("click",function(){Connection.sellAllItems()});var r=Utils.createButton("...","");r.addEventListener("click",function(){a.toggleConfig()});l.appendChild(m);l.appendChild(r);n.appendChild(l);k.appendChild(n);e=document.createElement("DIV");e.classList.add("config-container");e.classList.add("closed");n=document.createElement("TABLE");n.classList.add("config-table");
e.appendChild(n);m=n.createTHead();l=m.insertRow(0);m=m.insertRow(0);m.classList.add("table-header");m=m.insertCell(0);m.textContent="Inventory Configuration";m.setAttribute("colspan","10");l.classList.add("table-subheader");for(var q in t)0<=parseInt(q,10)&&"NFS"!=t[q]&&(l.insertCell(l.cells.length).classList.add("config-cell-check"),m=l.insertCell(l.cells.length),m.classList.add("config-cell-name"),m.textContent=t[q]);g=n.createTBody();d=document.createElement("DIV");d.style.position="relative";
d.appendChild(e);k.appendChild(d);Tabs.registerGameTab(k,1,"Inventory");Equipment.draw()}function q(b){var a=document.createElement("DIV");b.container=a;a.classList.add("header-item");var c=document.createElement("DIV");c.style.width="32px";c.style.height="32px";c.style.display="inline-block";c.style.position="relative";c.style.margin="0 auto";var g=document.createElement("DIV");g.classList.add("Half-"+b.name.replace(" ","_"));c.appendChild(g);a.appendChild(c);c=document.createElement("DIV");b.quantityElm=
c;c.classList.add("item-text");c.textContent=Utils.formatNumber(0);c.style.verticalAlign="top";c.style.marginTop="8px";c.style.display="inline-block";a.appendChild(c);c=document.createElement("DIV");c.style.display="none";b.worthElm=c;a.appendChild(c);return a}function r(b){if(0==b.category||null==b.category)return q(b);var c=document.createElement("DIV");b.container=c;c.classList.add("item");c.addEventListener("click",function(){a.selectItem(b.id)});tooltip.create(c,b.name);var e=document.createElement("DIV");
e.classList.add("item-text");var d=document.createElement("DIV");d.style.verticalAlign="top";d.style.display="inline-block";d.textContent=Utils.formatNumber(b.worth);b.worthElm=d;var f=document.createElement("DIV");f.classList.add("Quarter-Coins");f.style.display="inline-block";e.appendChild(f);e.appendChild(d);c.appendChild(e);d=document.createElement("DIV");d.style.width="64px";d.style.height="64px";d.style.position="relative";d.style.margin="0 auto";e=document.createElement("DIV");e.classList.add(b.name.replace(" ",
"_"));d.appendChild(e);c.appendChild(d);e=document.createElement("DIV");b.quantityElm=e;e.classList.add("item-text");e.textContent=Utils.formatNumber(0);c.appendChild(e);if(null!=b.category){var h,v,d=g.rows.length,e=b.category,e=2*e;e--;for(f=0;f<d;f++){var D=g.rows[f].cells[e];if(D&&0==D.childElementCount){h=g.rows[f].cells[e];v=g.rows[f].cells[e-1];break}}if(!h){v=g.insertRow(g.rows.length);v.classList.add("table-row");for(var k in t)0<=parseInt(k,10)&&"NFS"!=t[k]&&(v.insertCell(v.cells.length).classList.add("config-cell-check"),
v.insertCell(v.cells.length).classList.add("config-cell-name"));h=v.cells[e];v=v.cells[e-1]}k=document.createElement("DIV");k.classList.add("item-text");k.style.height="auto";d=document.createElement("SPAN");d.style.verticalAlign="top";e=document.createElement("DIV");e.classList.add("Third-"+Utils.cssifyName(b.name));e.style.display="inline-block";n[b.id]=e;d.textContent=b.name;l[b.id]=d;k.appendChild(e);k.appendChild(d);h.appendChild(k);h=document.createElement("INPUT");h.type="CHECKBOX";var m=b.id;
a.configClickers[m]=h;h.addEventListener("change",function(b){Connection.configureItem(m,a.configClickers[m].checked)});v.appendChild(h)}return c}a.items=[];a.configClickers=[];var k,d,b,c,h,g,e,f;a.names=[];var l=[],n=[],u=function(){return function(b,a){this.id=b;this.label=a}}();a.MarketItem=u;var y=function(){return function(b,a,c,e){this.id=b;this.name=a;this.worth=c;this.category=e}}();a.Item=y;(function(b){b[b.NFS=0]="NFS";b[b.ORE=1]="ORE";b[b.GEM=2]="GEM";b[b.INGREDIENT=3]="INGREDIENT";b[b.CRAFTING=
4]="CRAFTING";b[b.POTION=5]="POTION"})(a.Category||(a.Category={}));var t=a.Category;a.getSelectedItemQuantity=function(){return h?h.quantity:0};a.selectItem=function(e){e?(null!=h&&c.classList.remove(Utils.cssifyName(h.name)),h=a.items[e],c.classList.add(Utils.cssifyName(h.name)),f.style.display=5==h.category?"inline-block":"none",p()):(c.classList.remove(Utils.cssifyName(h.name)),h=null);b.style.display=null==h?"none":"block"};a.sellSelectedItem=s;a.sellAllSelectedItem=function(){s(h.quantity)};
a.modifyConfig=function(b,c){a.configClickers[b].checked=c};a.toggleConfig=function(){e.classList.contains("closed")?e.classList.remove("closed"):e.classList.add("closed")};a.isItem=function(b){for(var c=0;c<a.names.length;c++)if(a.names[c].label==b)return!0;return!1};a.getId=function(b){for(var c=0;c<a.names.length;c++)if(a.names[c].label==b)return a.names[c].id;return 0};a.addItem=function(b,c,e,g){a.items[b]||(b=new y(b,c,e,g),a.items[b.id]=b,Objects.register(b.id,b.name),a.names.push(new u(b.id,
b.name)),k||m(),0!=b.category&&null!=b.category?d.appendChild(r(b)):document.getElementById("headerInventory").appendChild(r(b)))};a.changePrice=function(b,c){Utils.ifNotDefault(c,function(){var e=a.items[b];e.worth=c;e.worthElm.textContent=Utils.formatNumber(c)})};a.changeQuantity=function(b,c){Utils.ifNotDefault(c,function(){Objects.setQuantity(b,c);Crafting.update();a.items[b].quantityElm.textContent=Utils.formatNumber(c);a.items[b].quantity=c;a.items[b].container.style.display=0!=a.items[b].category&&
null!=a.items[b].category?0==c?"none":"inline-block":0==Objects.getLifeTimeTotal(b)?"none":"inline-block";p()})};setInterval(function(){0>=l.length||a.items.forEach(function(b){var a=Objects.getLifeTimeTotal(b.id);l[b.id]&&(l[b.id].textContent=0<a?b.name:"???");n[b.id]&&(n[b.id].style.display=0<a?"inline-block":"none")})},1E3)})(Inventory||(Inventory={}));var Statistics;
(function(a){function s(){var a=document.createElement("TABLE"),d=a.createTHead(),b=d.insertRow(0);b.classList.add("table-header");b=b.insertCell(0);b.textContent="Item Statistics";b.setAttribute("colspan","3");d=d.insertRow(1);d.classList.add("table-subheader");b=d.insertCell(0);b.textContent="Lifetime Quantity";b.style.width="40%";b=d.insertCell(0);b.textContent="Prestige Quantity";b.style.width="40%";d=d.insertCell(0);d.textContent="Item";d.style.width="20%";m=a.createTBody();return a}var p,m,
q=[],r=function(){return function(){}}();a.changeStats=function(a,d,b){var c=q[a];Utils.ifNotDefault(d,function(){c.prestigeQuantity=d;c.prestigeRow.textContent=Utils.formatNumber(d)});Utils.ifNotDefault(b,function(){c.lifetimeQuantity=b;Objects.setLifeTimeTotal(a,b);c.alltimeRow.textContent=Utils.formatNumber(b);c.row.style.display=0<b?"table-row":"none"})};a.addItem=function(a,d){p||(p=document.createElement("DIV"),document.getElementById("paneContainer").appendChild(p),Tabs.registerGameTab(p,2,
"Statistics"),p.appendChild(s()));if(!q[a]){var b=new r;q[a]=b;var c=m.insertRow(m.rows.length);c.classList.add("table-row");b.row=c;b.alltimeRow=c.insertCell(0);b.alltimeRow.style.width="40%";b.prestigeRow=c.insertCell(0);b.prestigeRow.style.width="40%";b=c.insertCell(0);b.style.width="20%";c=document.createElement("DIV");c.classList.add("Third-"+Utils.cssifyName(d));c.style.display="inline-block";b.appendChild(c)}}})(Statistics||(Statistics={}));var Store;
(function(a){function s(){m=document.createElement("div");document.getElementById("paneContainer").appendChild(m);Tabs.registerGameTab(m,4,"Store");for(var b in k)if(0<=parseInt(b,10)){var a=k[b];if("CRAFTING"!=a){var d=document.createElement("div");d.classList.add("store-category");r[a]=d;var g=document.createElement("div");g.textContent=a;g.classList.add("store-category-header");d.appendChild(g);m.appendChild(d)}}}function p(b){var a=document.createElement("div");"undefined"!=b.tooltip&&tooltip.create(a,
b.tooltip);a.classList.add("store-item");b.container=a;var d=document.createElement("div");d.classList.add("store-item-header");var g=document.createElement("div");g.classList.add("store-item-header-text");g.textContent=b.name;d.appendChild(g);var e=document.createElement("div");e.classList.add("store-item-header-quantity-container");var f=document.createElement("span");f.classList.add("store-item-header-quantity");var l=document.createElement("span");l.classList.add("store-item-header-quantity");
var n=document.createElement("span");n.classList.add("store-item-header-quantity");n.textContent="/";1<b.maxQuantity&&(e.appendChild(l),e.appendChild(n),e.appendChild(f));d.appendChild(e);b.maxQuantityElm=f;b.quantityElm=l;b.nameElm=g;a.appendChild(d);d=document.createElement("DIV");d.style.width="64px";d.style.height="64px";d.style.position="relative";d.style.margin="0 auto";g=document.createElement("DIV");g.classList.add(Utils.cssifyName(b.name));d.appendChild(g);a.appendChild(d);d=document.createElement("div");
d.classList.add("store-item-footer");g=document.createElement("div");g.classList.add("item-text");e=document.createElement("div");e.textContent=Utils.formatNumber(b.price);e.style.display="inline-block";e.style.verticalAlign="top";b.priceElm=e;f=document.createElement("div");f.classList.add("Quarter-Coins");f.style.display="inline-block";g.appendChild(f);g.appendChild(e);var e=document.createElement("div"),f=Utils.createButton("Buy",""),m=b.id;if(5!=b.category)f.addEventListener("click",function(){Connection.purchaseItem(m)});
else{var k=document.createElement("INPUT");k.type="TEXT";k.style.width="40px";k.style.height="15px";e.appendChild(k);f.addEventListener("click",function(){Utils.isNumber(k.value)&&Connection.purchaseItem(m,+k.value)})}e.appendChild(f);d.appendChild(e);d.appendChild(g);a.appendChild(d);return a}var m,q=[],r=[];(function(b){b[b.MINING=1]="MINING";b[b.MACHINES=2]="MACHINES";b[b.GATHERING=3]="GATHERING";b[b.PROCESSING=4]="PROCESSING";b[b.ITEMS=5]="ITEMS";b[b.CRAFTING=6]="CRAFTING"})(a.Category||(a.Category=
{}));var k=a.Category,d=function(){return function(){}}();a.tempFix=function(){s()};a.addItem=function(b,a,h,g,e,f,l){m||s();if(!q[b]){Objects.register(b,e);var n=new d;n.id=b;n.category=a;n.price=h;n.factor=g;n.name=e;n.tooltip=l;n.maxQuantity=f?f:0;Objects.register(n.id,n.name);Objects.setTooltip(n.id,n.tooltip);2==n.category&&Equipment.registerGatherer(n.id);a=r[k[a]];null==a&&(a=r.MINING);6!=n.category&&a.appendChild(p(n));q[b]=n}};a.changeQuantity=function(b,a,d,g){var e=q[b];Utils.ifNotDefault(d,
function(){if(0!=d)try{Equipment.changeMaxQuantity(b,d),e.maxQuantity=d,e.maxQuantityElm.textContent=d.toString()}catch(a){}});Utils.ifNotDefault(a,function(){Objects.setQuantity(b,a);e.quantity=a;Crafting.update();Equipment.changeQuantity(b,a);0!=d&&6!=e.category&&(e.container.style.display=-1>=e.quantity||e.quantity>=e.maxQuantity&&0<e.maxQuantity?"none":"inline-block",e.maxQuantity&&1<e.maxQuantity&&(e.quantityElm.textContent=a.toString()))});Utils.ifNotDefault(g,function(){e.priceElm&&(e.price=
g,e.priceElm.textContent=Utils.formatNumber(g))})}})(Store||(Store={}));var Rock;
(function(a){function s(){if(e){var b=Date.now(),a=b-A,a=a/1E3;A=b;x=t?x+8*a:x-8*a;if(4<x||-4>x)t=!t;r(f,l,64+x,64+x);y&&setTimeout(s,10)}else setTimeout(s,10)}function p(b,a){var c=b.getBoundingClientRect();return{x:a.clientX-c.left,y:a.clientY-c.top}}function m(b,c){if(b>f&&b<f+64&&c>l&&c<l+64){if(u){r(f+2,l+2,60,60);if(z)for(var d=Utils.getRandomInt(1,3),e=0;e<d;e++){var g=Utils.getRandomInt(-5,5),h=Utils.getRandomInt(-2,2);a.particles.push(new B(b+g,c+h))}z=!1}else r(f-2,l-2,68,68),z=!0;y=!1;
n=!0}else n&&(r(f,l,64,64),n=!1,z=!0)}function q(b,a){b!=f&&a!=l&&(f=b,l=a,e?r(b,a,64,64):setTimeout(function(){q(b,a)},10))}function r(a,c,d,e){b.clearRect(0,0,250,250);b.drawImage(h,0,0);b.drawImage(g,a,c,d,e)}var k=document.getElementById("rock"),d=document.getElementById("particles"),b=k.getContext("2d"),c=d.getContext("2d"),h=new Image,g=new Image(16,16),e=!1,f=0,l=0,n=!1,u=!1,y=!0,t=!0,x=0,A=Date.now();a.particles=[];var B=function(){function b(a,c){this.height=this.width=5;this.dispose=!1;
this.x=a;this.y=c;this.verticalVelocity=Utils.getRandomInt(-100,-155);this.horizonalVelocity=Utils.getRandomInt(-50,50);this.width=Utils.getRandomInt(3,6);this.height=Utils.getRandomInt(3,6);this.rotation=Utils.getRandomInt(0,180);this.rotationalVelocity=Utils.getRandomInt(-75,75);this.lastTick=Date.now()}b.prototype.update=function(){var b=Date.now()-this.lastTick;this.lastTick=Date.now();b/=1E3;this.rotation+=this.rotationalVelocity*b;this.y+=this.verticalVelocity*b;this.x+=this.horizonalVelocity*
b;this.verticalVelocity+=200*b;270<this.y&&(this.dispose=!0)};return b}();a.Particle=B;s();var z=!0;a.moveRock=q;var w=document.createElement("canvas"),C=w.getContext("2d");setInterval(function(){c.clearRect(0,0,250,250);for(var b=0;b<a.particles.length;b++){var d=a.particles[b];d.update();var e=d;w.width=e.width;w.height=e.height;C.rect(0,0,e.width,e.height);C.fillStyle="gray";C.fill();C.stroke();c.beginPath();var g=c,f=w,n=e.x,l=e.y,h=e.width,k=e.height,e=e.rotation*Math.PI/180;g.translate(n+h/
2,l+k/2);g.rotate(e);g.drawImage(f,h/2*-1,k/2*-1,h,k);g.rotate(-1*e);g.translate(-1*(n+h/2),-1*(l+k/2));d.dispose&&a.particles.splice(b,1)}},10);(function(){h.onload=function(){b.drawImage(h,0,0);console.log("rock loaded")};h.src="/Content/Rock.png";g.onload=function(){e=!0};g.src="/Content/Stone.png";k.addEventListener("mousemove",function(b){b=p(k,b);m(b.x,b.y)},!1);k.addEventListener("mousedown",function(b){b=p(k,b);u=!0;m(b.x,b.y);Connection.mine(b.x,b.y)},!1);k.addEventListener("mouseup",function(b){b=
p(k,b);u=!1;m(b.x,b.y)},!1);k.addEventListener("mouseleave",function(b){b=p(k,b);u=!1;m(b.x,b.y)},!1)})()})(Rock||(Rock={}));var Equipment;
(function(a){function s(){r=document.createElement("div");r.classList.add("store-category");var a=document.createElement("div");a.classList.add("store-category-header");a.textContent="Gatherers";r.appendChild(a);q.appendChild(r)}function p(a){r||s();var b=m[a];b.container=document.createElement("div");b.container.classList.add("equipment-gatherer-container");var c=document.createElement("div");c.classList.add("store-item-header");var h=document.createElement("div");h.classList.add("store-item-header-text");
h.textContent=Objects.lookupName(a);c.appendChild(h);h=Utils.createButton("Disable","");h.addEventListener("click",function(){Connection.toggleGatherer(a,!b.enabled)});var g=document.createElement("div");g.classList.add("store-item-header-quantity-container");b.quantityElm=document.createElement("span");var e=document.createElement("span");e.textContent="/";b.maxQuantityElm=document.createElement("span");g.appendChild(b.quantityElm);g.appendChild(e);g.appendChild(b.maxQuantityElm);c.appendChild(g);
b.container.appendChild(c);b.efficiencyElm=document.createElement("div");b.container.appendChild(b.efficiencyElm);b.fuelConsumptionElm=document.createElement("div");b.container.appendChild(b.fuelConsumptionElm);b.rarityBonusElm=document.createElement("div");b.container.appendChild(b.rarityBonusElm);b.container.appendChild(h);b.toggleElm=h.firstChild;r.appendChild(b.container)}var m=[],q,r,k=function(){return function(){}}();a.draw=function(){q||(q=document.createElement("div"),document.getElementById("paneContainer").appendChild(q),
Tabs.registerGameTab(q,3,"Equipment"))};a.registerGatherer=function(a){if(!m[a]){var b=new k;m[a]=b;p(a)}};a.toggleGatherer=function(a,b){var c=m[a];c&&(c.enabled=b,c.toggleElm.textContent=b?"Disable":"Enable")};a.changeQuantity=function(a,b){Utils.ifNotDefault(b,function(){var c=m[a];c&&(c.quantity=b,c.container.style.display=-1<b?"inline-block":"none",c.quantityElm.textContent=Utils.formatNumber(b))})};a.changeMaxQuantity=function(a,b){Utils.ifNotDefault(b,function(){var c=m[a];c&&(c.maxQuantity=
b,c.maxQuantityElm.textContent=Utils.formatNumber(b))})};a.changeFuelConsumption=function(a,b){Utils.ifNotDefault(b,function(){var c=m[a];c&&(c.fuelConsumption=b,c.fuelConsumptionElm.textContent="Fuel consumed: "+Utils.formatNumber(b))})};a.changeEfficiency=function(a,b){Utils.ifNotDefault(b,function(){var c=m[a];c&&(c.efficiency=b,c.efficiencyElm.textContent="Resources/s: "+Utils.formatNumber(b))})};a.changeRarityBonus=function(a,b){Utils.ifNotDefault(b,function(){var c=m[a];c&&(c.rarityBonus=b,
c.rarityBonusElm.textContent="Rarity multi: x"+Utils.formatNumber(b))})}})(Equipment||(Equipment={}));var Crafting;
(function(a){function s(){d=document.createElement("DIV");document.getElementById("paneContainer").appendChild(d);Tabs.registerGameTab(d,5,"Crafting");b=document.createElement("DIV");d.appendChild(b);c=document.createElement("DIV");d.appendChild(c);h=document.createElement("TABLE");h.classList.add("block-table");var a=h.createTHead(),n=a.insertRow(0);n.classList.add("table-subheader");a=a.insertRow(0);a.classList.add("table-header");a=a.insertCell(0);a.colSpan=g.length;a.textContent="Crafting Table";
for(a=0;a<g.length;a++){var l=n.insertCell(0);l.style.width=e[a];l.textContent=g[a];"0"!=f[a]&&(l.style.minWidth=f[a])}n=h.insertRow(2);n.classList.add("table-subheader");n=n.insertCell(0);n.colSpan=g.length;n.textContent="Items";n=h.insertRow(3);n.classList.add("table-subheader");n=n.insertCell(0);n.colSpan=g.length;n.textContent="Upgrades";c.appendChild(h)}function p(b,c){var e=a.processors[b];if(e){var g=e._recipes[c];for(e.selectedRecipe=c;e.recipeList.lastChild;)e.recipeList.removeChild(e.recipeList.lastChild);
for(var d=0;d<g.ingredients.length;d++){var n=document.createElement("DIV");n.classList.add("item-text");n.style.height="30px";var f=document.createElement("DIV");f.style.display="inline-block";var l=document.createElement("DIV");g.ingredients[d].quantityDiv=l;l.style.display="inline-block";l.style.verticalAlign="super";var h=k.fromNumber(g.ingredients[d].quantity).lessThanOrEqual(k.fromNumber(Objects.getQuantity(g.ingredients[d].id)));l.style.color=h?"darkgreen":"darkred";l.textContent=Utils.formatNumber(g.ingredients[d].quantity);
f.classList.add("Half-"+Utils.cssifyName(Objects.lookupName(g.ingredients[d].id)));n.appendChild(f);n.appendChild(l);e.recipeList.appendChild(n)}}}function m(a){var c=document.createElement("TABLE");c.classList.add("block-table");a.container=c;var d=c.createTHead(),f=d.insertRow(0);f.classList.add("table-subheader");d=d.insertRow(0);d.classList.add("table-header");d=d.insertCell(0);d.colSpan=g.length;d.textContent=a.name;for(d=0;d<g.length;d++){var h=f.insertCell(0);h.style.width=n[d];h.textContent=
l[d];"0"!=n[d]&&(h.style.minWidth=u[d])}d=c.insertRow(2);d.classList.add("table-row");d=d.insertCell(0);d.colSpan=l.length;h=document.createElement("DIV");h.classList.add("progress-bar-container");f=document.createElement("DIV");f.classList.add("progress-bar");var k=document.createElement("DIV");k.classList.add("progress-bar-text-container");var m=document.createElement("DIV");m.classList.add("progress-bar-text");k.appendChild(m);h.appendChild(k);a.progressBar=f;a.progressText=m;h.appendChild(f);
d.appendChild(h);f=c.insertRow(3);f.classList.add("table-row");for(d=0;d<l.length;d++){h=f.insertCell(0);h.style.width=e[d];h.style.height="75px";"0"!=u[d]&&(h.style.minWidth=u[d]);"Image"==l[d]&&(k=document.createElement("DIV"),k.classList.add(Utils.cssifyName(a.name)),k.style.margin="0 auto",h.appendChild(k));"Capacity"==l[d]&&(h.textContent="0",a.capacityElm=h);"Input"==l[d]&&(a.recipeList=h);if("Output"==l[d]){k=Utils.createButton("Max","");h.appendChild(k);k=document.createElement("INPUT");k.type=
"TEXT";k.style.width="35px";a.quantityTextbox=k;h.appendChild(k);var r=a.id,s=document.createElement("SELECT");s.addEventListener("change",function(b){p(r,s.selectedIndex)});a.recipeSelector=s;h.appendChild(s)}"Action"==l[d]&&(k=Utils.createButton("Activate",""),k.addEventListener("click",function(){Utils.isNumber(a.quantityTextbox.value)&&Connection.processRecipe(a.id,a.recipeSelector.selectedIndex,+a.quantityTextbox.value)},!1),h.appendChild(k))}q(a);b.appendChild(c)}function q(b){A||(A=document.createElement("div"),
x.appendChild(A));var a=document.createElement("div");a.classList.add("processor-sidebar");b.sidebarContainer=a;var c=document.createElement("div");c.classList.add("buff-header");c.textContent=b.name;a.appendChild(c);c=document.createElement("div");c.classList.add("processor-sidebar-progress-bar-container");var d=document.createElement("div");d.classList.add("processor-sidebar-progress-bar");b.sidebarProgressBar=d;var e=document.createElement("div");e.classList.add("processor-sidebar-progress-text");
b.sidebarProgressText=e;c.appendChild(e);c.appendChild(d);a.appendChild(c);c=document.createElement("div");c.classList.add("processor-sidebar-progress-bar-container");d=document.createElement("div");d.classList.add("processor-sidebar-progress-bar");b.sidebarJobBar=d;e=document.createElement("div");e.classList.add("processor-sidebar-progress-text");b.sidebarJobText=e;c.appendChild(e);c.appendChild(d);a.appendChild(c);a.style.display="none";A.appendChild(a)}function r(b,a){var c=h.rows.length;a&&(c=
y,y++);c=h.insertRow(c);c.classList.add("table-row");b.row=c;for(var d=0;d<g.length;d++){var n=c.insertCell(0);n.style.width=e[d];"0"!=f[d]&&(n.style.minWidth=f[d]);"Name"==g[d]&&(n.textContent=Objects.lookupName(b.id));if("Input"==g[d])for(var l=0;l<b.ingredients.length;l++){var k=document.createElement("DIV");k.classList.add("item-text");k.style.height="auto";var m=document.createElement("DIV");m.style.display="inline-block";var p=document.createElement("DIV");b.ingredients[l].quantityDiv=p;p.style.display=
"inline-block";p.style.verticalAlign="super";p.textContent=Utils.formatNumber(b.ingredients[l].quantity);m.classList.add("Third-"+Utils.cssifyName(Objects.lookupName(b.ingredients[l].id)));k.appendChild(m);k.appendChild(p);n.appendChild(k)}"Description"==g[d]&&(n.textContent=Objects.getTooltip(b.resultants[0].id));if("Output"==g[d])for(l=0;l<b.resultants.length;l++)k=document.createElement("DIV"),k.classList.add("item-text"),k.style.height="auto",m=document.createElement("DIV"),m.style.display="inline-block",
p=document.createElement("DIV"),p.style.display="inline-block",p.style.verticalAlign="super",p.textContent=Utils.formatNumber(b.resultants[l].quantity),m.classList.add("Third-"+Utils.cssifyName(Objects.lookupName(b.resultants[l].id))),k.appendChild(m),b.isItem&&k.appendChild(p),n.appendChild(k);if("Action"==g[d]&&(l=Utils.createButton("Craft",""),l.addEventListener("click",function(){Connection.craftRecipe(b.id,1)},!1),n.appendChild(l),b.isItem)){var r=document.createElement("INPUT");r.type="TEXT";
r.style.width="30px";l=Utils.createButton("Craft-x","");l.addEventListener("click",function(){Connection.craftRecipe(b.id,+r.value)},!1);n.appendChild(l);n.appendChild(r)}}}var k=dcodeIO.Long,d,b,c,h,g=["Action","Description","Input","Output","Name"],e=["10%","50%","15%","15%","10%"],f=["170px","0","0","0","0"],l=["Action","Output","Input","Capacity","Image"],n=["10%","30%","20%","20%","20%"],u=["170px","0","0","0","0"],y=3,t=[];a.processors=[];var x=document.getElementById("sidebarInformation"),
A,B=function(){function b(){this._recipes=[]}b.prototype.addRecipe=function(b){this._recipes.push(b);this.selectedRecipe||(this.selectedRecipe=0)};return b}();a.Processor=B;var z=function(){function b(){this.ingredients=[];this.resultants=[]}b.prototype.addIngredient=function(b){this.ingredients.push(b)};b.prototype.addResultant=function(b){this.resultants.push(b)};return b}();a.Recipe=z;var w=function(){return function(b,a){this.id=b;this.quantity=a}}();a.Ingredient=w;a.addRecipe=function(b,a,c,
e){d||s();if(!t[b]){var g=new z;g.id=b;g.isItem=e;t[b]=g;for(b=0;b<a.length;b++)g.addIngredient(new w(a[b].Id,a[b].Quantity));for(b=0;b<c.length;b++)g.addResultant(new w(c[b].Id,c[b].Quantity));r(g,e)}};a.addProcessor=function(b,c,e){d||s();if(!a.processors[b]){var g=new B;g.id=b;g.name=c;g.requiredId=e;a.processors[b]=g;m(g)}};a.addProcessorRecipe=function(b,c,d){if(a.processors[b]){var e=a.processors[b],g;a:if(a.processors[b]){g=a.processors[b];for(var n=0;n<g._recipes.length;n++)if(d[0].Id==g._recipes[n].resultants[0].id){g=
!0;break a}g=!1}else g=void 0;if(!g){g=new z;for(n=0;n<c.length;n++)g.addIngredient(new w(c[n].Id,c[n].Quantity));for(n=0;n<d.length;n++)g.addResultant(new w(d[n].Id,d[n].Quantity));e.addRecipe(g);c=document.createElement("OPTION");c.textContent=Objects.lookupName(d[0].Id);e.recipeSelector.appendChild(c);1==e._recipes.length&&p(b,0)}}};a.updateProcessor=function(b,c,d,e,g,n){var f=a.processors[b];if(f){var l=!1;Utils.ifNotDefault(c,function(){f.selectedRecipe=c});Utils.ifNotDefault(g,function(){f.totalOperations=
g;l=!0});Utils.ifNotDefault(d,function(){f.operationDuration=d});Utils.ifNotDefault(n,function(){f.capacityElm.textContent=n.toString()});Utils.ifNotDefault(e,function(){f.completedOperations=e;l=!0});if(l){if(0>=f.totalOperations||f.completedOperations==f.totalOperations){f.progressBar.style.width="0%";f.progressText.textContent="";f.sidebarProgressText.textContent="";f.sidebarContainer.style.display="none";f.totalOperationCompletionTime=0;return}f.sidebarContainer.style.display="inline-block";f.operationStartTime=
Date.now();f.operationCompletionTime=f.operationStartTime+1E3*f.operationDuration;0==f.totalOperationCompletionTime&&(f.totalOperationCompletionTime=f.operationStartTime+1E3*f.operationDuration*(f.totalOperations-f.completedOperations))}if(-1<f.selectedRecipe)try{f.progressText.textContent=Objects.lookupName(f._recipes[f.selectedRecipe].resultants[0].id)+" ("+f.completedOperations+"/"+f.totalOperations+")",f.sidebarJobText.textContent=Objects.lookupName(f._recipes[f.selectedRecipe].resultants[0].id)+
" ("+f.completedOperations+"/"+f.totalOperations+")"}catch(h){console.log("invalid processor recipe "+f.selectedRecipe)}else f.progressText.textContent="",f.sidebarProgressText.textContent=""}};setInterval(function(){a.processors.forEach(function(b){if(0>=b.operationDuration)b.progressBar.style.width="0%";else if(b.completedOperations!=b.totalOperations&&0<b.totalOperations){var a=b.operationCompletionTime-Date.now(),a=a/1E3,c=b.totalOperationCompletionTime-Date.now(),d=c/(b.operationDuration*b.totalOperations),
a=a/b.operationDuration,a=100-100*a;b.progressBar.style.width=a+"%";b.sidebarJobBar.style.width=a+"%";b.sidebarProgressBar.style.width=100-d/10+"%";b.sidebarProgressText.textContent=Utils.formatTime(c/1E3)}0!=b.requiredId&&(b.container.style.display=0<Objects.getQuantity(b.requiredId)?"block":"none")})},10);a.update=function(){d&&(t.forEach(function(b){var a=Objects.getQuantity(b.id);b.row.style.display=-1==a||!b.isItem&&0<a?"none":"";b.ingredients.forEach(function(b){var a=Objects.getQuantity(b.id),
a=k.fromNumber(b.quantity).lessThanOrEqual(k.fromNumber(a));b.quantityDiv.style.color=a?"darkgreen":"darkred"})}),a.processors.forEach(function(b){p(b.id,b.recipeSelector.selectedIndex)}))}})(Crafting||(Crafting={}));var Buffs;
(function(a){var s=[],p=document.getElementById("sidebarInformation"),m,q=function(){return function(){}}();a.register=function(a,k,d,b){if(!s[a]){var c=new q;c.name=k;c.description=d;c.duration=b;s[a]=c;a=document.createElement("div");a.classList.add("buff-container");tooltip.create(a,c.description);k=document.createElement("div");k.textContent=c.name;k.classList.add("buff-header");a.appendChild(k);k=document.createElement("div");k.classList.add("buff-image-container");a.appendChild(k);d=document.createElement("div");
d.classList.add(Utils.cssifyName(c.name));k.appendChild(d);k=document.createElement("div");k.classList.add("buff-header");a.appendChild(k);m.appendChild(a);c.container=a;c.durationElm=k}};a.update=function(a,k){var d=s[a];d.timeActive=k;d.durationElm.textContent="("+Utils.formatTime(d.duration-k)+")";d.container.style.display=0==k?"none":"inline-block"};m=document.createElement("div");p.appendChild(m)})(Buffs||(Buffs={}));var Account;
(function(a){function s(){b.classList.contains("closed")||b.classList.add("closed")}function p(){var b=new modal.Window,a=document.createElement("DIV");a.style.width="400px";var c=document.createElement("DIV");c.style.marginBottom="5px";var d=document.createElement("INPUT");d.type="TEXT";d.maxLength=16;d.placeholder="Username";c.appendChild(d);var g=document.createElement("DIV");g.style.marginBottom="5px";var f=document.createElement("INPUT");f.type="PASSWORD";f.pattern=".{6,}";f.placeholder="Password";
g.appendChild(f);var l=document.createElement("DIV");l.style.marginBottom="5px";var h=document.createElement("INPUT");h.type="CHECKBOX";h.placeholder="Stay logged in on this computer?";l.appendChild(h);a.appendChild(c);a.appendChild(g);a.appendChild(l);e=document.createElement("div");b.addElement(e);b.title="Log in";b.addElement(a);b.addNegativeOption("Cancel").addEventListener("click",function(){modal.close()},!1);b.addAffirmativeOption("Submit").addEventListener("click",function(){for(r(d.value,
f.value,h.checked);e.firstChild;)e.removeChild(e.firstChild)},!1);b.show()}function m(){var b=new modal.Window,a=document.createElement("DIV");a.style.width="400px";var c=document.createElement("DIV");c.style.marginBottom="5px";var d=document.createElement("INPUT");d.type="TEXT";d.maxLength=16;d.placeholder="Username";c.appendChild(d);var e=document.createElement("DIV");e.style.marginBottom="5px";var f=document.createElement("INPUT");f.type="EMAIL";f.placeholder="Email";e.appendChild(f);var l=document.createElement("DIV");
l.style.marginBottom="5px";var h=document.createElement("INPUT");h.type="PASSWORD";h.pattern=".{6,}";h.placeholder="Password";l.appendChild(h);var k=document.createElement("DIV");k.style.marginBottom="5px";var m=document.createElement("INPUT");m.type="PASSWORD";m.pattern=".{6,}";m.placeholder="Confirm password";k.appendChild(m);m.onblur=function(){h.value!=m.value&&m.setCustomValidity("Passwords are not the same.")};m.onfocus=function(){m.setCustomValidity("")};a.appendChild(c);a.appendChild(e);a.appendChild(l);
a.appendChild(k);b.addElement(a);g=document.createElement("div");b.addElement(g);b.title="Register";b.addNegativeOption("Cancel").addEventListener("click",function(){modal.close()},!1);b.addAffirmativeOption("Submit").addEventListener("click",function(){for(q(f.value,d.value,h.value,m.value);g.firstChild;)g.removeChild(g.firstChild)},!1);b.show()}function q(b,a,c,e){$.ajax({type:"POST",url:"/Api/Account/Register",data:$.param({Email:b,UserName:a,Password:c,ConfirmPassword:e}),headers:{"Content-Type":"application/x-www-form-urlencoded"},
success:function(b){b=JSON.parse(b);if(b.Succeeded)Connection.restart(),d(),modal.close();else{for(;g.firstChild;)g.removeChild(g.firstChild);for(var a=0;a<b.Errors.length;a++){var c=document.createElement("div");c.textContent=b.Errors[a];g.appendChild(c)}}}})}function r(b,a,c){$.ajax({type:"POST",url:"/Api/Account/Login",data:$.param({UserName:b,Password:a,RememberMe:c}),headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(b){b=JSON.parse(b);if(b.Succeeded)Connection.restart(),
d(),modal.close();else{for(;e.firstChild;)e.removeChild(e.firstChild);for(var a=0;a<b.Errors.length;a++){var c=document.createElement("div");c.textContent=b.Errors[a];e.appendChild(c)}}}})}function k(){$.ajax({type:"POST",url:"/Api/Account/LogOff",headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(b){console.log(b);Connection.restart();d();location.reload()}})}function d(){$.ajax({type:"POST",url:"/Api/Account/Info",headers:{"Content-Type":"application/x-www-form-urlencoded"},
success:function(c){c=JSON.parse(c);var d=c.Anonymous;h.textContent=d?"Guest":c.UserName;a.signedIn=!d;Utils.cssSwap(b,d?"registered":"anonymous",d?"anonymous":"registered")}})}var b,c,h;a.signedIn=!1;var g,e,f,l;(function(b){function c(a,d,e){b.currentlyInspecting=a;var g=new Ajax.LeaderboardAjaxService;g.resultsElement=e;g.sendRequest(a,d)}b.currentlyInspecting=0;b.open=function(){var d=new modal.Window;d.title="Leaderboards";if(!a.signedIn){var e=document.createElement("div");e.style.fontSize=
"18px";e.style.background="darkred";e.style.color="white";e.style.fontWeight="bold";e.style.textAlign="center";e.style.border="1px solid white";e.textContent="Sign in to see where you rank.";d.addElement(e)}var g=document.createElement("DIV");g.style.width="400px";g.appendChild(Ajax.createLoader());d.addElement(g);e=document.createElement("div");e.style.textAlign="center";e.style.marginTop="5px";var f=Utils.createButton("<<",""),l=document.createElement("input");l.type="TEXT";var h=Utils.createButton(">>",
"");f.addEventListener("click",function(){b.currentlyInspecting-=20;0>b.currentlyInspecting&&(b.currentlyInspecting=0);b.currentlyInspecting-=b.currentlyInspecting%20;c(b.currentlyInspecting,b.currentlyInspecting+20,g)});l.addEventListener("keyup",function(a){13==a.keyCode&&(a=a.currentTarget.value,Utils.isNumber(a)&&(b.currentlyInspecting=+a,b.currentlyInspecting-=b.currentlyInspecting%20,c(b.currentlyInspecting,b.currentlyInspecting+20,g)))});h.addEventListener("click",function(){b.currentlyInspecting+=
20;b.currentlyInspecting-=b.currentlyInspecting%20;c(b.currentlyInspecting,b.currentlyInspecting+20,g)});e.appendChild(f);e.appendChild(l);e.appendChild(h);d.addElement(e);d.addOption("Close").addEventListener("click",function(){modal.close()});d.show();c(0,20,g)}})(l||(l={}));(function(){b=document.createElement("DIV");b.classList.add("account-manager");b.classList.add("closed");b.onmouseenter=function(){clearTimeout(f)};b.onmouseleave=function(){f=setTimeout(s,250)};var a=document.createElement("DIV");
a.textContent="Sign in";a.classList.add("account-option");a.classList.add("anonymous-account-option");a.addEventListener("click",function(){p()});b.appendChild(a);a=document.createElement("DIV");a.textContent="Register";a.classList.add("account-option");a.classList.add("anonymous-account-option");a.addEventListener("click",function(){m()});b.appendChild(a);a=document.createElement("DIV");a.textContent="Options";a.classList.add("account-option");a.classList.add("registered-account-option");b.appendChild(a);
a=document.createElement("DIV");a.textContent="Sign out";a.classList.add("account-option");a.classList.add("registered-account-option");a.addEventListener("click",function(){k()});b.appendChild(a);c=document.createElement("DIV");c.classList.add("account-user");h=document.createElement("SPAN");c.appendChild(h);b.appendChild(c);document.body.appendChild(b);c.addEventListener("click",function(){b.classList.contains("closed")?b.classList.remove("closed"):b.classList.add("closed")});a=document.createElement("SPAN");
a.textContent="Leaderboards";a.addEventListener("click",function(){l.open()});a.style.cursor="pointer";document.getElementsByClassName("header-links")[0].appendChild(a);d()})();a.info=d})(Account||(Account={}));var modal;
(function(a){function s(){a.activeWindow&&a.activeWindow.hide();a.activeWindow=null}function p(){if(a.activeWindow){var k=a.activeWindow.container.getBoundingClientRect();a.activeWindow.container.style.left=window.innerWidth/2-(k.right-k.left)/2+"px";a.activeWindow.container.style.top=window.innerHeight/2-(k.bottom-k.top)/2+"px"}else clearInterval(a.intervalIdentifier)}var m=0,q;a.activeWindow;a.intervalIdentifier;a.hide=s;a.close=function(){if(a.activeWindow){var k=a.activeWindow;s();k.container.parentNode.removeChild(k.container)}};
var r=function(){function k(){this.container=document.createElement("div");this.container.addEventListener("click",function(b){b.stopPropagation()},!1);this.container.classList.add("modal-window");if(!q){var d=document.createElement("div");q=d;d.classList.add("modal-wrapper");d.addEventListener("click",function(b){b.stopPropagation();3E3<Date.now()-m&&a.close()},!1);document.body.appendChild(d)}q.appendChild(this.container);this.titleEl=document.createElement("div");this.titleEl.classList.add("modal-header");
this.bodyEl=document.createElement("div");this.container.appendChild(this.titleEl);this.container.appendChild(this.bodyEl)}Object.defineProperty(k.prototype,"title",{get:function(){return this._title},set:function(a){this._title=a;this.titleEl.textContent=this._title},enumerable:!0,configurable:!0});k.prototype.addElement=function(a){this.bodyEl.appendChild(a)};k.prototype.addOption=function(a){this.options||(this.options=document.createElement("div"),this.options.classList.add("modal-options"),this.container.appendChild(this.options));
var b=document.createElement("span");b.classList.add("modal-option");var c=document.createElement("span");c.textContent=a;b.appendChild(c);this.options.appendChild(b);return b};k.prototype.addAffirmativeOption=function(a){a=this.addOption(a);a.classList.add("affirmative");return a};k.prototype.addNegativeOption=function(a){a=this.addOption(a);a.classList.add("negative");return a};k.prototype.show=function(){this.container.classList.contains("opened")||this.container.classList.add("opened");q.classList.contains("opened")||
q.classList.add("opened");a.activeWindow=this;p();a.intervalIdentifier=setInterval(p,100);m=Date.now()};k.prototype.hide=function(){this.container.classList.contains("opened")&&this.container.classList.remove("opened");q.classList.contains("opened")&&q.classList.remove("opened")};return k}();a.Window=r})(modal||(modal={}));var Ajax;
(function(a){function s(){for(var a=0;a<p.length;a++){var k=p[a];k.dead?p.splice(a,1):k.update()}setTimeout(s,10)}var p=[],m=function(){function a(){}a.prototype.failed=function(a){this.resultsElement.textContent="Loading failed..."};a.prototype.succeeded=function(a){for(;this.resultsElement.firstChild;)this.resultsElement.removeChild(this.resultsElement.firstChild);var d=document.createElement("table"),b=d.createTHead().insertRow(0);b.classList.add("table-subheader");var c=b.insertCell(0);c.textContent=
"Score";c.style.width="65%";c=b.insertCell(0);c.textContent="Name";c.style.width="25%";b=b.insertCell(0);b.textContent="Rank";b.style.width="10%";for(var b=d.createTBody(),h=0;h<a.length;h++){var g=a[h],e=b.insertRow(b.rows.length);e.classList.add("table-row");var f=e.insertCell(0);f.textContent=Utils.formatNumber(g.Score);f.style.width="65%";f.addEventListener("click",function(b){var a=b.target;b=a.dataset?a.dataset.tooltip:a.getAttribute("data-tooltip");0<a.textContent.indexOf(",")?a.textContent=
Utils.formatNumber(b):a.textContent=Utils.formatNumber(b,!0)});f.dataset?f.dataset.tooltip=g.Score:f.setAttribute("data-tooltip",g.Score.toString());e.insertCell(0).textContent=g.UserId;c.style.width="25%";e=e.insertCell(0);e.textContent=Utils.formatNumber(g.Rank);e.style.width="10%"}this.resultsElement.appendChild(d)};a.prototype.sendRequest=function(a,d){var b=this;$.ajax({asyn:!0,type:"POST",url:"/Api/Stats/LeaderBoard/",data:$.param({Lower:a,Upper:d}),headers:{"Content-Type":"application/x-www-form-urlencoded"},
success:function(a){a=JSON.parse(a);b.succeeded(a)},failure:function(a){b.failed(a)}})};return a}();a.LeaderboardAjaxService=m;var q=function(){function a(){this.notDisplayed=20;this.notches=40;this.space=.02;this.spawned=!1;this.spinPos=0;this.spinSpeed=30;this.squareSize=50;this.timeSinceLastTick=Date.now();this.thickness=3;this.dead=!1;this.container=document.createElement("div");this.container.classList.add("loader");this.canvasElement=document.createElement("canvas");this.canvasElement.width=
this.squareSize;this.canvasElement.height=this.squareSize;this.container.appendChild(this.canvasElement);this.context=this.canvasElement.getContext("2d")}a.prototype.update=function(){var a=Date.now();this.canvasElement.parentElement&&(this.spawned=!0);var d=a-this.timeSinceLastTick;this.spinPos+=d/1E3*this.spinSpeed;this.timeSinceLastTick=a;this.spawned&&!this.canvasElement.parentElement&&(this.dead=!0);this.draw()};a.prototype.draw=function(){var a=this.squareSize/2,d=this.squareSize/2-5,b=(2-this.space*
this.notches)/this.notches,c=this.spinPos%this.notches,h=c-this.notDisplayed;this.context.clearRect(0,0,this.canvasElement.width,this.canvasElement.height);for(var g=0;g<this.notches;g++){var e=0+g*b+this.space*g,f=e+b,l=g-this.notches;g<=c&&g>=h?(this.context.beginPath(),this.context.arc(a,a,d,e*Math.PI,f*Math.PI),this.context.lineWidth=this.thickness,this.context.strokeStyle="rgba(113,142,164,"+(1-(c-g)/(this.notches-this.notDisplayed))+")",this.context.stroke()):l<=c&&l>=h&&(this.context.beginPath(),
this.context.arc(a,a,d,e*Math.PI,f*Math.PI),this.context.lineWidth=this.thickness,this.context.strokeStyle="rgba(113,142,164,"+(1-(c-l)/(this.notches-this.notDisplayed))+")",this.context.stroke())}};return a}();a.createLoader=function(){var a=new q;p.push(a);return a.container};s()})(Ajax||(Ajax={}));var Achievements;
(function(a){function s(){m.forEach(function(a){null!=a.requires&&(a.requires.requiredBy=a)})}function p(a){a/=60;if(60>a)return Math.max(Math.ceil(a),1)+" minutes";a/=60;if(24>a)return Math.max(Math.ceil(a),1)+(1>=a?" hour":" hours");a/=24;if(30>a)return Math.max(Math.ceil(a),1)+(1>=a?" day":" days");a/=30;if(12>a)return Math.max(Math.ceil(a),1)+(1>=a?" month":" months")}var m=[],q,r=!1;(function(a){a[a.Undefined=0]="Undefined";a[a.Money=1]="Money";a[a.TimePlayed=2]="TimePlayed";a[a.RockClicks=3]=
"RockClicks";a[a.Oil=4]="Oil"})(a.Category||(a.Category={}));var k=function(){function a(){}a.prototype.getTooltip=function(){if(1==this.category)return"Have a total of "+Utils.formatNumber(this.goal)+" accumulated coins.";if(2==this.category)return"Play for "+p(this.goal)+".";if(3==this.category)return"Click the rock "+Utils.formatNumber(this.goal)+" times.";if(4==this.category)return 1==this.goal?"Get some oil!":"Have a total of "+Utils.formatNumber(this.goal)+" accumulated oil."};a.prototype.trickleDown=
function(a){a||(a=this.progress);this.progress=a;this.progressBar.style.width=a/this.goal*100+"%";this.progressText.textContent=Utils.formatNumber(Math.min(a,this.goal))+"/"+Utils.formatNumber(this.goal);null!=this.requiredBy&&this.requiredBy.trickleDown(a)};return a}();a.register=function(a,b,c,h,g){if(!m[a]){var e=new k;e.name=b;0!=c&&(e.requires=m[c]);e.goal=h;e.category=g;q||(q=document.createElement("div"),document.getElementById("paneContainer").appendChild(q),Tabs.registerGameTab(q,6,"Achievements"));
b=document.createElement("div");b.classList.add("achievement");e.container=b;c=document.createElement("div");c.classList.add("achievement-image");b.appendChild(c);c=document.createElement("div");c.classList.add("achievement-body");b.appendChild(c);h=document.createElement("div");h.classList.add("achievement-title");h.textContent=e.name;c.appendChild(h);h=document.createElement("div");h.classList.add("achievement-description");h.textContent=e.getTooltip();c.appendChild(h);h=document.createElement("div");
h.classList.add("achievement-progress-container");c.appendChild(h);c=document.createElement("div");c.classList.add("achievement-progress-text");e.progressText=c;h.appendChild(c);c=document.createElement("div");c.classList.add("achievement-progress");c.style.width="0%";h.appendChild(c);e.progressBar=c;q.appendChild(b);m[a]=e}};a.updateAchievement=function(a,b){r||(s(),r=!0);var c=m[a];c&&(b||(b=0),c.progress=b,c.trickleDown(b))}})(Achievements||(Achievements={}));var Market;
(function(a){function s(a){var b=document.createElement("div");b.classList.add("market-order");b.classList.add("closed");a.panel=b;var c=document.createElement("div");c.textContent="Empty";c.classList.add("market-order-header");a.header=c;b.appendChild(c);c=document.createElement("div");c.classList.add("market-order-controls");var h=document.createElement("div");h.classList.add("market-control");h.classList.add("buy");h.textContent="Buy";h.addEventListener("click",function(){a.buying=!0;p(a)});c.appendChild(h);
h=document.createElement("div");h.classList.add("market-control");h.classList.add("sell");h.textContent="Sell";h.addEventListener("click",function(){a.buying=!1;p(a)});c.appendChild(h);b.appendChild(c);c=document.createElement("div");c.classList.add("market-order-display");b.appendChild(c);q.push(a);m.appendChild(b)}function p(a){var b=new modal.Window;b.title=a.buying?"Buy":"Sell";var c=document.createElement("div"),h=document.createElement("div"),g=document.createElement("div");g.textContent="Item: ";
g.style.width="70px";g.style.display="inline-block";var e=document.createElement("input");a.item=e;e.type="TEXT";e.addEventListener("keyup",function(){a.summarize()});$(e).autocomplete({source:Inventory.names,delay:0,select:function(){a.summarize()}}).data("uiAutocomplete")._renderItem=function(a,b){return $("<li>").data("item.autocomplete",b).append("<span>").text(b.label).append('<div style="display:inline-block; float:right;" class=Third-'+Utils.cssifyName(b.label)+"></div>").appendTo(a)};h.appendChild(g);
h.appendChild(e);c.appendChild(h);h=document.createElement("div");g=document.createElement("div");g.style.width="70px";g.style.display="inline-block";e=document.createElement("input");a.quantity=e;e.type="TEXT";e.addEventListener("keyup",function(){a.summarize()});g.textContent="Quantity: ";h.appendChild(g);h.appendChild(e);c.appendChild(h);h=document.createElement("div");g=document.createElement("div");g.textContent="Coins: ";g.style.width="70px";g.style.display="inline-block";e=document.createElement("input");
e.addEventListener("keyup",function(){a.summarize()});a.offer=e;h.appendChild(g);h.appendChild(e);c.appendChild(h);h=document.createElement("div");a.summary=h;c.appendChild(h);b.addElement(c);b.addNegativeOption("Cancel").addEventListener("click",function(){modal.close()});b.addAffirmativeOption("Submit").addEventListener("click",function(){a.submit()});b.show()}var m,q=[],r=dcodeIO.Long,k=function(){function a(){this.closed=!0}a.prototype.summarize=function(){var a=$(this.item).val(),c=$(this.quantity).val(),
d=$(this.offer).val();Inventory.isItem(a)&&Utils.isNumber(c)&&Utils.isNumber(d)&&$(this.summary).text((this.buying?"Buying":"Selling")+" "+Utils.formatNumber(c)+" "+a+" @ $"+Utils.formatNumber(d)+" each for a total of $"+Utils.formatNumber(d*c)+".")};a.prototype.submit=function(){var a=$(this.item).val(),c=$(this.quantity).val(),d=$(this.offer).val();Inventory.isItem(a)&&Utils.isNumber(c)&&Utils.isNumber(d)&&(Connection.submitOrder(Inventory.getId(a),r.fromNumber(c),r.fromNumber(d),!this.buying),
console.log((this.buying?"Buying":"Selling")+" "+c+" "+Inventory.getId(a)+" @ $"+d))};return a}();a.Order=k;a.init=function(){if(!m){m=document.createElement("DIV");document.getElementById("paneContainer").appendChild(m);Tabs.registerGameTab(m,7,"Market");for(var a=0;6>a;a++)s(new k)}};$(window).resize(function(){$(".ui-autocomplete").css("display","none")})})(Market||(Market={}));var Connection;
(function(a){function s(){console.log("Connection opened");var a=h.encode64();p(a);h=new Komodo.ClientActions;q=setInterval(function(){var a=h.encode64();p(a);h=new Komodo.ClientActions},1E3)}function p(a){if(a.encode64){a.SelectedTab&&(a.SelectedTab=c);var b=a.encode64();Chat.log("Sent "+m(b)+" bytes to komodo.");Chat.log("Decoded: ");Chat.log(JSON.stringify(a));Chat.log("Encoded: ");Chat.log(a.encode64());Komodo.send(a.encode64())}else Chat.log("Sent "+m(a)+" bytes to komodo."),Komodo.send(a)}function m(a){var b=
[];a=[a];for(var c=0;a.length;){var d=a.pop();if("boolean"===typeof d)c+=4;else if("string"===typeof d)c+=2*d.length;else if("number"===typeof d)c+=8;else if("object"===typeof d&&-1===b.indexOf(d)){b.push(d);for(var h in d)a.push(d[h])}}return c}var q,r,k,d,b,c;(function(a){a[a.Inventory=1]="Inventory";a[a.Statistics=2]="Statistics";a[a.Equipment=3]="Equipment";a[a.Store=4]="Store";a[a.Crafting=5]="Crafting";a[a.Achievements=6]="Achievements";a[a.Market=7]="Market"})(a.Tabs||(a.Tabs={}));(function(){var a=
document.getElementsByClassName("header-links")[0],c=document.createElement("div");c.style.display="inline-block";c.textContent="Version History";c.addEventListener("click",function(){window.open("/version")});c.style.cursor="pointer";a.appendChild(c);b=document.createElement("div");b.style.display="inline-block";b.textContent="There are 0 players mining.";a.appendChild(b);r=document.createElement("div");r.classList.add("error-notification-tray");k=document.createElement("div");k.classList.add("network-error");
a=document.createElement("div");a.classList.add("network-error-text");a.textContent="No connection";k.appendChild(a);d=document.createElement("div");d.classList.add("rate-limited");a=document.createElement("div");a.classList.add("network-error-text");d.style.display="none";a.textContent="You have exceeded your allotted requests";d.appendChild(a);a=document.getElementById("game");r.appendChild(k);r.appendChild(d);a.insertBefore(r,a.childNodes[0])})();Komodo.connection.received(function(a){Chat.log("Recieved "+
m(a)+" bytes from komodo.");Chat.log("Encoded: ");Chat.log(a);Chat.log("Decoded: ");Chat.log(JSON.stringify(Komodo.decode(a)));Chat.log(m(JSON.stringify(Komodo.decode(a)))-m(a)+" bytes saved.");a=Komodo.decode(a);if(null!=a.Messages)for(var c=a.Messages,f=0;f<c.length;f++){var l=c[f];Chat.receiveGlobalMessage(l.Sender,l.Text,l.Time,l.Permissions)}if(null!=a.GameSchema){c=a.GameSchema;if(c.Items)for(f=0;f<c.Items.length;f++)Inventory.addItem(c.Items[f].Id,c.Items[f].Name,c.Items[f].Worth,c.Items[f].Category),
Statistics.addItem(c.Items[f].Id,c.Items[f].Name);if(c.StoreItems)for(f=0;f<c.StoreItems.length;f++)l=c.StoreItems[f],Store.addItem(l.Id,l.Category,l.Price,l.Factor,l.Name,l.MaxQuantity,l.Tooltip);if(c.Processors)for(f=0;f<c.Processors.length;f++){l=c.Processors[f];Crafting.addProcessor(l.Id,l.Name,l.RequiredId);for(var h=0;h<l.Recipes.length;h++)Crafting.addProcessorRecipe(l.Id,l.Recipes[h].Ingredients,l.Recipes[h].Resultants)}if(c.CraftingItems)for(f=0;f<c.CraftingItems.length;f++)l=c.CraftingItems[f],
Crafting.addRecipe(l.Id,l.Ingredients,l.Resultants,l.IsItem);if(c.Buffs)for(f=0;f<c.Buffs.length;f++)l=c.Buffs[f],Buffs.register(l.Id,l.Name,l.Description,l.Duration);if(c.Achievements)for(f=0;f<c.Achievements.length;f++)l=c.Achievements[f],console.log(l),Achievements.register(l.Id,l.Name,l.RequiredId,l.Goal,l.Category);Market.init()}if(null!=a.Items)for(c=a.Items,f=0;f<c.length;f++)Inventory.changeQuantity(c[f].Id,c[f].Quantity),Inventory.changePrice(c[f].Id,c[f].Worth);if(null!=a.StoreItemsUpdate)for(c=
a.StoreItemsUpdate,f=0;f<c.length;f++)Store.changeQuantity(c[f].Id,c[f].Quantity,c[f].MaxQuantity,c[f].Price);if(null!=a.StatItemsUpdate)for(c=a.StatItemsUpdate,f=0;f<c.length;f++)Statistics.changeStats(c[f].Id,c[f].PrestigeQuantity,c[f].LifeTimeQuantity);if(null!=a.ConfigItems)for(c=a.ConfigItems,f=0;f<c.length;f++)Inventory.modifyConfig(c[f].Id,c[f].Enabled);if(null!=a.Processors)for(c=a.Processors,f=0;f<c.length;f++)l=c[f],Crafting.updateProcessor(l.Id,l.SelectedRecipe,l.OperationDuration,l.CompletedOperations,
l.TotalOperations,l.Capacity);null!=a.AntiCheatCoordinates&&(c=a.AntiCheatCoordinates,Rock.moveRock(c.X,c.Y));if(null!=a.Buffs)for(c=a.Buffs,f=0;f<c.length;f++)l=c[f],Buffs.update(l.Id,l.TimeActive);null!=a.IsRateLimited&&(d.style.display=a.IsRateLimited?"block":"none");if(null!=a.Gatherers)for(c=a.Gatherers,f=0;f<c.length;f++)l=c[f],Equipment.toggleGatherer(l.Id,l.Enabled),Equipment.changeEfficiency(l.Id,l.Efficiency),Equipment.changeFuelConsumption(l.Id,l.FuelConsumed),Equipment.changeRarityBonus(l.Id,
l.RarityBonus);a.ConnectedUsers&&(b.textContent="There are "+a.ConnectedUsers+" players mining.");if(a.Achievements)for(c=a.Achievements,f=0;f<c.length;f++)l=c[f],Achievements.updateAchievement(l.Id,l.Progress);if(a.Orders)for(c=0;c<a.Orders.length;c++)console.log(a.Orders[c])});a.restart=function(){Komodo.restart()};var h=new Komodo.ClientActions;Komodo.connection.stateChanged(function(a){a.newState===$.signalR.connectionState.connected&&(s(),k.style.display="none");a.newState===$.signalR.connectionState.disconnected&&
(clearInterval(q),k.style.display="block");a.newState===$.signalR.connectionState.reconnecting&&(k.style.display="block")});a.changeSelectedTab=function(a){c=a};a.placeOrder=function(a,b,c,d){var k=new Komodo.ClientActions.Order;k.ItemId=a;k.ItemQuantity=b;k.ItemValue=c;k.IsSelling=d;console.log(k);h.Orders.push(k)};a.submitOrder=function(a,b,c,d){var k=new Komodo.ClientActions.Order;k.ItemId=a;k.ItemQuantity=b;k.ItemValue=c;k.IsSelling=d;console.log(k);h.Orders.push(k)};a.toggleGatherer=function(a,
b){var c=new Komodo.ClientActions.GathererAction;c.Id=a;c.Enabled=b;h.GathererActions.push(c)};a.drink=function(a){var b=new Komodo.ClientActions.PotionAction;b.Id=a;h.PotionActions.push(b)};a.mine=function(a,b){var c=new Komodo.ClientActions.MiningAction;c.X=a;c.Y=b;h.MiningActions.push(c)};a.sellItem=function(a,b){var c=new Komodo.ClientActions.InventoryAction,d=new Komodo.ClientActions.InventoryAction.SellAction;d.Id=a;d.Quantity=b;console.log(b);c.Sell=d;h.InventoryActions.push(c)};a.configureItem=
function(a,b){var c=new Komodo.ClientActions.InventoryAction,d=new Komodo.ClientActions.InventoryAction.ConfigAction;d.Id=a;d.Enabled=b;c.Config=d;h.InventoryActions.push(c)};a.requestOrders=function(){h.RequestOrders=!0};a.purchaseItem=function(a,b){var c=new Komodo.ClientActions.StoreAction,d=new Komodo.ClientActions.StoreAction.PurchaseAction;d.Id=a;d.Quantity=b?b:1;c.Purchase=d;h.StoreActions.push(c)};a.sellAllItems=function(){var a=new Komodo.ClientActions.InventoryAction;a.SellAll=!0;h.InventoryActions.push(a)};
a.craftRecipe=function(a,b){var c=new Komodo.ClientActions.CraftingAction;c.Id=a;c.Quantity=b;h.CraftingActions.push(c)};a.processRecipe=function(a,b,c){var d=new Komodo.ClientActions.ProcessingAction;d.Id=a;d.RecipeIndex=b;d.Iterations=c;h.ProcessingActions.push(d)};a.sendGlobalMessage=function(a){var b=new Komodo.ClientActions.SocialAction,c=new Komodo.ClientActions.SocialAction.ChatAction;c.GlobalMessage=a;b.Chat=c;h.SocialActions.push(b)};a.send=p})(Connection||(Connection={}));
